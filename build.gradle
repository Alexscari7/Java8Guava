/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id "io.freefair.lombok" version "3.6.6"
}

repositories {
    mavenLocal()
    maven {
        name 'aliyun-repository'
        url 'https://maven.aliyun.com/nexus/content/groups/public'
    }
    mavenCentral()
    jcenter()
}



dependencies {
    // implementation不能传递依赖，编译更快
    // lombok插件直接通过plugin引入，不需要单独引入依赖和注解
    // 对于slf4，相当于接口，实现类可以使用log4j2和logback(推荐)
    // 对于junit，jupiter-api是接口，实现类为junit
    compile 'org.slf4j:slf4j-api:1.7.25'
    compile 'org.slf4j:slf4j-log4j12:1.7.25'
    compile 'org.junit.jupiter:junit-jupiter-api:5.3.2'
    compile 'junit:junit:4.12'
    compile 'com.alibaba:fastjson:1.2.58'
    compile 'com.google.guava:guava:27.0.1-jre'
    implementation 'org.apache.commons:commons-lang3:3.9'
    implementation 'redis.clients:jedis:3.2.0'
    implementation 'commons-pool:commons-pool:20030825.183949'
    implementation 'org.apache.commons:commons-collections4:4.4'
}

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'
group = 'com.wsd'
version = '1.0'
sourceCompatibility = '1.8'

task printVersion(group: 'One', description: 'Two'){
    doLast {
        logger.quiet("version $version")
    }
}

task createDistribution(type: Zip){
    from jar.outputs.files
    from(sourceSets*.allSource){
        into 'src'
    }
}

task  backupReleaseDistribution(type: Copy){
    from createDistribution.outputs.files
    into "$buildDir/backup"
    rename('Java8Guava-1.0.zip','myapp.zip')
}

task release(dependsOn: backupReleaseDistribution){
    doLast {
        logger.quiet 'Releasing the project...'
    }
}